* Assembling a Path
** Idea 1:
*** Get all major structures
**** Fused rings
**** Isolated rings
**** Aliphatic Chains
**** Functional Groups
**** Remaining single atoms
**** Ignore hydrogen atoms!
*** Find number of neighbours.
*** Start with a group with smallest numbers of neighbours.


** Notes on Graph:
*** Maybe move to multiGraph when using minor systems (multiple edges)
*** Compute major/minor systems earlier.


** Counting Atoms:

*** Every carbon atom in a ring gets a counter. We need the positions and inverse lookup.
*** Once an atom has been used it is stored with its real counter in another list.
*** If it is not yet in that list then we get it from the original list.
*** Positions are actually computed with respect to an offset.
*** The offset is increased every time a non-carbon atom is used.
*** For carbon atoms offset is increased once a structure has been fully described.

Questions: Am I talking positions (i.e., element at position 5 in the ring or am I counting atoms only.)
c c c o c    O is 1 but at position 4.

** Compiling Path on Major system:

*** Start with largest Ring, If no Ring use longest chain.

*** Expand greedily into the direction of the most interesting substitution.

*** Then do a global position computation.


* Rich Structures

** Interface functionality
   Some of these will be empty, in particular for Atoms/Bonds
   1. Components 
      + atom: empty
      + bond: the atoms it connects
      + atomset: 
        - compute subsystems from that
        - compute interior bonds from that
   2. Contexts (or ComponentOf) 
      The superstructures in which this structure occurs as component.
      + atomset: compute supersystems from that
   3. External: external bonds
      + bond: empty
      + atom: all bonds
   4. Connections: Triples of 
      - type: bridge atom, shared bond, spiro atom, shared atom or connecting bond 
        + spiro atoms are atoms shared between rings. Spiro atoms between other Atom sets are called shared.
        + shared atoms are shared atoms between at least one none ring
        + bridge atoms are shared atoms inside fused rings (i.e., end points of shared bonds)
      - element: shared atom or bond or the external bond that connects
      - connected structure: an atom or an atom set

      Note that there can be multiple versions for the same element, representing the layers.
      
      + bond: empty
      + atom: can only have connecting bond
      + atomset: can have all three

* Testing
** Structures we are interested in
*** Structures from the books
*** Simple ring structures
**** with OH substitution:
**** with other substitutions:
**** with O replacement:
**** with other replacement:
*** Multi ring structures
*** Complex fused rings: Sterane, US06358966-20020319-C00001
*** Inner rings: 
    asphaltenes, coronene, hexahelicene, corannulene,
    http://www.chemcomp.com/journal/depictor.htm
    Circulene, Ovalene

** We need image, mol, svg for all.
** Testing cycle:
*** image to mol for reimplementation
*** mol to simple cml for cmlSpeech
*** cml to svg for cdk-renderer
*** cml to annotated cml for cmlSpeech
** Some of the internet images:
*** Rings: 7.tif
